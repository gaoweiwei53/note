# 虚拟机类加载机制
## 运行时数据区域

![运行时数据区](../resources/JVM-Architecture.png)

## 类的生命周

## 类的加载过程
加载 --> 验证 --> 准备 --> 解析 --> 初始化
### 加载
在加载阶段虚拟机需要完成以下三件事：
1) 通过一个类的全限定名来获取定义此类的二进制字节流。
2) 将这个字节流所代表的静态存储结构转化为**方法区**的运行时数据结构。
3) 在内存中生成一个代表这个类的java.lang.Class对象，作为方法区这个类的各种数据的访问入口。
### 验证
验证是Linking阶段的第一步，这一步的目的是确保Class文件的字节流中包含的信息符合《Java虚拟机规范》的全部约束要求，保证这些信息被当作代码运行后不会危害虚拟机的自身安全。
验证阶段大致会完成四个检验：
- 文件格式验证：验证字节流是否符合Class文件格式规范。
- 元数据验证：对类的元数据信息进行语义校验，保证不存在与《Java虚拟机规范》定义相悖的元数据信息。
- 字节码验证：
- 符号引用验证
## 准备
正式为类中定义的变量（即静态变量，被static修饰的变量）分配内存并设置变量初始值。从概念上讲，这些变量所使用的内存都应当在方法区中进行分配。
## 解析
解析阶段是Java虚拟机将常量池内的符号引用替换为直接引用的过程。
- 符号引用
- 直接引用

解析动作主要针对类或接口、字段、类方法、接口方法、方法类型、方法句柄和调用点 限定符这7类符合引用进行。
## 初始化
根据程序员通过程序编码制定的主观计划去初始化类变量和其他资源。也就是执行类构造器`<Clinit>()`方法的过程
